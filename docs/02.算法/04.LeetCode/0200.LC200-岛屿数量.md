---
title: LC200-å²›å±¿æ•°é‡
date: 2021-10-09 16:02:40
permalink: /pages/96e6b3/
---


## é¢˜ç›®æè¿°

- é“¾æ¥ï¼š[https://leetcode-cn.com/problems/number-of-islands/](https://leetcode-cn.com/problems/number-of-islands/)
- éš¾åº¦ï¼šğŸŸ¡
- æ ‡ç­¾ï¼š[DFS](/pages/ae8ff2/)ã€[å¹¶æŸ¥é›†](/pages/0e8914/)

## è§£é¢˜æ€è·¯
### æ–¹æ³•ä¸€ï¼šDFS
ä»ä¸€ä¸ªå°å²›â€œ1â€å‡ºå‘ï¼Œå¯ä»¥é€šè¿‡[DFSæœç´¢](/pages/ae8ff2/#é€’å½’æ¨¡æ¿)éå†æ‰€æœ‰å¯è¾¾çš„å°å²›ï¼Œè®°ä¸ºä¸€ä¸ªå²›å±¿ã€‚ç”±äºâ€œ0â€ä¸å‚ä¸æœç´¢ï¼Œæ‰€ä»¥å¯ä»¥åœ¨DFSè¿‡ç¨‹ä¸­å°†å·²è®¿é—®çš„å°å²›ç½®ä¸ºâ€œ0â€æ¥ä»£æ›¿å¸¸è§„æ¨¡æ¿ä¸­`visitedæ•°ç»„`çš„ä½œç”¨ã€‚

ä»£ç å®ç°ï¼š

<code-group>
<code-block title="C++" active>
```cpp
class Solution {
public:
    int numIslands(vector<vector<char>>& grid) {
        int res = 0, m = grid.size(), n = grid[0].size();
        for(int i = 0; i < m; ++i) {
            for(int j = 0; j < n; ++j) {
                if(grid[i][j] == '1') {
                    ++res;
                    dfs(i, j, grid);  // ä»æ–°èµ·ç‚¹è¿›è¡ŒDFS
                }
            }      
        }
        return res;
    }
    void dfs(int row, int col, vector<vector<char>>& grid) {
        if(row >= 0 && row < grid.size() && col >= 0 && col < grid[0].size()) {
            if(grid[row][col] == '1') {
                grid[row][col] = '0';  // æ ‡è®°ä¸ºå·²è®¿é—®ï¼Œå¹¶å¯¹å½“å‰å…ƒç´ ä¸Šä¸‹å·¦å³å„å…ƒç´ è¿›è¡Œæœç´¢
                dfs(row - 1, col, grid);
                dfs(row + 1, col, grid);
                dfs(row, col - 1, grid);
                dfs(row, col + 1, grid);
            }
        }
    }
};
```
</code-block>
</code-group>


### æ–¹æ³•äºŒï¼šå¹¶æŸ¥é›†
å²›å±¿æ•°é‡å¯è”æƒ³å¯¹åº”åˆ°å¹¶æŸ¥é›†ä¸­é›†åˆçš„ä¸ªæ•°ï¼Œç›´æ¥ç»“åˆç›¸åº”çš„[ç±»æ¨¡æ¿](/pages/0e8914/#æ¨¡æ¿ï¼ˆå«ç»Ÿè®¡é›†åˆä¸ªæ•°ï¼‰)å®ç°ï¼ŒåŒæ—¶æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š
1. `rootæ•°ç»„`çš„å¤§å°ä¸º`m * n`ï¼Œ ä¸”æ³¨æ„äºŒç»´çŸ©é˜µçš„ä¸€ç»´ä¸‹æ ‡è½¬æ¢
2. éå†è‡³å°å²›â€œ1â€æ—¶ï¼Œä¸ä¸Šä¸‹å·¦å³çš„å°å²›â€œ1â€è¿›è¡Œåˆå¹¶ï¼ŒåŒæ—¶ç½®ä¸ºâ€œ0â€é˜²æ­¢é‡å¤æ“ä½œ
3. åˆå¹¶åçš„ç±»ä¸­çš„`count`è¿˜åº”å‡å»åŸäºŒç»´çŸ©é˜µä¸­â€œ0â€çš„æ•°é‡æ‰ä¸ºæ‰€æ±‚æ•°é‡

ä»£ç å®ç°ï¼š

<code-group>
<code-block title="C++" active>
```cpp
class Solution {
public:
    int numIslands(vector<vector<char>>& grid) {
        int m = grid.size(), n = grid[0].size(), count0 = 0;
        UnionFindSet ufs(m * n);
        for(int i = 0; i < m; ++i) {
            for(int j = 0; j < n; ++j) {
                if(grid[i][j] == '1') {
                    grid[i][j] == '0';
                    if(i - 1 >= 0 && grid[i-1][j] == '1') ufs.merge(i * n + j, (i-1) * n + j);
                    if(i + 1 < m && grid[i+1][j] == '1') ufs.merge(i * n + j, (i+1) * n + j);
                    if(j - 1 >= 0 && grid[i][j-1] == '1') ufs.merge(i * n + j, i * n + j - 1);
                    if(j + 1 < n && grid[i][j+1] == '1') ufs.merge(i * n + j, i * n + j + 1);
                } else {
                    ++count0;
                }
            }      
        }
        return ufs.getCount() - count0;
    }

    // å¹¶æŸ¥é›†ç±»
    class UnionFindSet {
    private:
        vector<int> root;
        int count = 0;
    public:
        UnionFindSet(int n) {      // å¹¶æŸ¥é›†åˆå§‹åŒ–
            for(int i = 0; i < n; ++i) {
                root.push_back(i);
            }
            count = n;  // åˆå§‹åŒ–count
        }
        int find(int x) {     // æŸ¥æ‰¾ï¼Œè·¯å¾„å‹ç¼©
            return x == root[x] ? x : (root[x] = find(root[x]));
        }
        void merge(int x, int y) {      // åˆå¹¶
            int rX = find(x), rY = find(y);
            if(rX != rY){
                root[rX] = rY;
                --count;  // åˆå¹¶æ—¶é›†åˆæ•°å‡å°‘
            }
        }
        int getCount() {  
            return count;
        }
    };
};
```
</code-block>
</code-group>