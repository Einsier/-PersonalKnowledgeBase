---
title: LC149-ç›´çº¿ä¸Šæœ€å¤šçš„ç‚¹æ•°
date: 2021-06-24 21:32:20
permalink: /pages/ea76cb/
---

## é¢˜ç›®æè¿°

- é“¾æ¥ï¼š[https://leetcode-cn.com/problems/max-points-on-a-line/](https://leetcode-cn.com/problems/max-points-on-a-line/)
- éš¾åº¦ï¼šğŸ”´
- æ ‡ç­¾ï¼š[æ•°å­¦](/pages/4a8b23/)ã€[å“ˆå¸Œè¡¨](/pages/dee52c/)

## è§£é¢˜æ€è·¯
### æ–¹æ³•ä¸€ï¼šæšä¸¾
ä¸¤ç‚¹ç¡®å®šä¸€æ¡ç›´çº¿ï¼Œå½“åŠ å…¥ç¬¬ä¸‰ä¸ªç‚¹æ—¶ï¼Œå¯ä»¥é€šè¿‡æ–œç‡åˆ¤æ–­æ˜¯å¦ä¸‰ç‚¹å…±çº¿ã€‚å› æ­¤ï¼Œæœ¬é¢˜æˆ‘ä»¬å¯ä»¥æšä¸¾ä¸åŒçš„ä¸¤ç‚¹ç»„åˆï¼Œå¹¶è®¡ç®—å‰©ä½™å„ç‚¹æ˜¯å¦åœ¨è¯¥ä¸¤ç‚¹æ‰€ç¡®å®šçš„ç›´çº¿ä¸Šã€‚å…¶ä¸­ï¼Œåˆ¤æ–­å¼`(y1-y2)/(x1-x2) == (y2-y3)/(x2-x3)`å¯è½¬åŒ–ä¸º`(y1-y2)*(x2-x3) == (x1-x2)*(y2-y3)`é˜²æ­¢é™¤æ³•çš„ç²¾åº¦é—®é¢˜ã€‚

ä»£ç å®ç°ï¼š

<code-group>
<code-block title="C++" active>
```cpp
class Solution {
public:
    int maxPoints(vector<vector<int>>& points) {
        if(points.size() < 3) return points.size();
        int res = 0;
        // æšä¸¾
        for(int i = 0; i < points.size(); ++i) {
            vector<int> pi = points[i];
            for(int j = i + 1; j < points.size(); ++j) {
                vector<int> pj = points[j];
                int count = 2;  // ä¸¤ç‚¹å¿…æˆä¸€æ¡ç›´çº¿ï¼Œåˆå§‹ä¸º2
                for(int k = j + 1; k < points.size(); ++k) {
                    vector<int> pk = points[k];
                    int a = (pi[1] - pj[1]) * (pj[0] - pk[0]);  // åˆ¤æ–­ä¸¤æ¡ç›´çº¿æ–œç‡ç›¸ç­‰è½¬ä¸ºä¹˜æ³•è®¡ç®—
                    int b = (pi[0] - pj[0]) * (pj[1] - pk[1]);
                    if(a == b) ++count;
                }
                res = max(res, count);
            }
        }
        return res;
    }
};
```
</code-block>
</code-group>

### æ–¹æ³•äºŒï¼šæšä¸¾ä¼˜åŒ–ï¼ˆå“ˆå¸Œè¡¨ï¼‰
æšä¸¾ä¸åŒçš„ä¸¤ç‚¹ç»„åˆè¿‡ç¨‹ä¸å¯é¿å…ï¼Œä¸è¿‡èƒ½å°†ä¸Šè¿°ç»Ÿè®¡ç‚¹æ•°è¿‡ç¨‹ä¼˜åŒ–ä¸ºä»å½“å‰ç‚¹å‘å‡ºçš„ç›¸åŒç›´çº¿çš„æœ€å¤§å€¼ï¼ˆä½¿ç”¨å“ˆå¸Œè¡¨ç»Ÿè®¡æ–œç‡kï¼‰ã€‚å…¶ä¸­ï¼Œä¸ºäº†é¿å…æ–œç‡çš„ç²¾åº¦é—®é¢˜ï¼Œæ–œç‡ä½¿ç”¨[åˆ†æ•°](/pages/4a8b23/#åˆ†æ•°)çš„å½¢å¼è¡¨ç¤ºï¼Œå¹¶ä»¥`up/down`çš„å­—ç¬¦ä¸²å½¢å¼ä½œä¸ºå“ˆå¸Œçš„keyå€¼ã€‚

ä»£ç å®ç°ï¼š

<code-group>
<code-block title="C++" active>
```cpp
class Solution {
public:
    int maxPoints(vector<vector<int>>& points) {
        if(points.size() < 3) return points.size();
        int res = 0;
        // æšä¸¾ + å“ˆå¸Œè¡¨
        for(int i = 0; i < points.size(); ++i) {
            unordered_map<string, int> count;
            int temp = 0;  // å½“å‰ç‚¹å‘å‡ºç›¸åŒç›´çº¿çš„æœ€å¤§å€¼
            for(int j = i + 1; j < points.size(); ++j) {
                string key = getKey(points[i][1] - points[j][1], points[i][0] - points[j][0]);
                count[key]++;
                temp = max(temp, count[key]);
            }
            res = max(res, temp + 1);  // åŠ ä¸Šå½“å‰ç‚¹
        }
        return res;
    }
    // æ±‚æœ€å¤§å…¬çº¦æ•°
    int gcd(int a, int b) {
        return !b ? a : gcd(b, a % b);
    }
    // è·å–åˆ†æ•°å½¢å¼çš„æ–œç‡key
    string getKey(int up, int down) {
        if(up == 0) return "0/1";  // kä¸º0
        if(down == 0) return "1/0";  // kä¸ºæ­£æ— ç©·
        if(down < 0) {  // åˆ†æ¯ä¸ºè´Ÿï¼Œä»¤åˆ†å­åˆ†æ¯åŒæ—¶å–ç›¸åæ•°
            up = -up;
            down = -down;
        }
        int d = gcd(abs(up), abs(down));  // å–åˆ†å­åˆ†æ¯ç»å¯¹å€¼çš„æœ€å¤§å…¬çº¦æ•°
        up /= d;
        down /= d;
        return to_string(up) + "/" + to_string(down);
    }
};
```
</code-block>
</code-group>