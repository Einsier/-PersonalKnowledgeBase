---
title: LC909-è›‡æ¢¯æ£‹
date: 2021-06-27 21:17:26
permalink: /pages/c2ef6a/
---

## é¢˜ç›®æè¿°

- é“¾æ¥ï¼š[https://leetcode-cn.com/problems/snakes-and-ladders/](https://leetcode-cn.com/problems/snakes-and-ladders/)
- éš¾åº¦ï¼šğŸŸ¡
- æ ‡ç­¾ï¼š[BFS](/pages/c635ec/)

## è§£é¢˜æ€è·¯
### æ–¹æ³•ä¸€ï¼šå•å‘BFS
æ­¤é¢˜åŒç†äºï¼š
- [LC752-æ‰“å¼€è½¬ç›˜é”](/pages/8e87e0/)
- [LC773-æ»‘åŠ¨è°œé¢˜](/pages/6746e4/)

å¯ç›´æ¥å¥—ç”¨[å•å‘BFS](/pages/c635ec/#å•å‘BFS)çš„æ¨¡æ¿ï¼ŒåŒæ—¶æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š
1. å¯å°†äºŒç»´æ•°ç»„é™ç»´è‡³ä¸€ç»´æ•°ç»„ï¼Œé‚£ä¹ˆå½“`board[x] != -1`æ—¶ï¼Œç›´æ¥ä¼ é€åˆ°çš„ä½ç½®å³ä¸º`board[x]`ï¼Œå¯ç®€åŒ–è¿‡ç¨‹
2. è½¬åŒ–ä¸ºä¸€ç»´æ•°ç»„åï¼Œä½ç½®èŒƒå›´å³ä¸º[1,n*n]ï¼Œå› æ­¤å¯ç›´æ¥ä½¿ç”¨boolå‹æ•°ç»„inqæ¥è®°å½•æ¯ä¸ªä½ç½®æ˜¯å¦å·²å…¥è¿‡é˜Ÿ
3. æ³¨æ„[x+1,x+6]æ˜¯å¦è¶Šç•Œ

ä»£ç å®ç°ï¼š

<code-group>
<code-block title="C++" active>
```cpp
class Solution {
public:
    int snakesAndLadders(vector<vector<int>>& board) {
        int n = board.size(), flag = 1;
        vector<int> _board = {0};  // è½¬åŒ–ä¸ºä¸€ç»´æ•°ç»„
        for(int i = n - 1; i >= 0; --i, flag ^= 1) {
            if(flag) {
                for(int j = 0; j < n; ++j) _board.push_back(board[i][j]);
            } else {
                for(int j = n - 1; j >= 0; --j) _board.push_back(board[i][j]);
            }
        }
        vector<bool> inq(n * n + 1, false);
        return BFS(1, n * n, _board, inq);
    }
    // å•å‘BFS
    int BFS(int start, int target, vector<int>& board, vector<bool>& inq) {
        int res = 0;
        queue<int> q;
        q.push(start);
        inq[start] = true;
        while(!q.empty()) {
            for(int i = 0, len = q.size(); i < len; ++i) {
                if(q.front() == target) return res;
                vector<int> nexts = getNexts(q.front(), board, inq);
                q.pop();
                for(int j = 0; j < nexts.size(); ++j) {
                    q.push(nexts[j]);
                    inq[nexts[j]] = true;
                }
            }
            ++res;
        }
        return -1;
    }
    // è·å–å½“å‰ä½ç½®ä¸€ä¸ªå›åˆå¯ä»¥åˆ°è¾¾çš„ä½ç½®ï¼ˆä¸”æœªæ›¾å…¥é˜Ÿï¼‰
    vector<int> getNexts(int x, vector<int>& board, vector<bool>& inq) {
        vector<int> res;
        for(int i = 1; i <= 6 && x + i < board.size(); ++i) {  // æ³¨æ„ä¸‹æ ‡è¶Šç•Œ
            if(board[x+i] == -1) {
                if(!inq[x+i]) res.push_back(x + i);
            } else {
                if(!inq[board[x+i]]) res.push_back(board[x+i]);
            }
        }
        return res;
    }
};
```
</code-block>
</code-group>