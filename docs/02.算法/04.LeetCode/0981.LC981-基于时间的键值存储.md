---
title: LC981-åŸºäºæ—¶é—´çš„é”®å€¼å­˜å‚¨
date: 2021-07-11 11:06:42
permalink: /pages/fe0307/
---

## é¢˜ç›®æè¿°

- é“¾æ¥ï¼š[https://leetcode-cn.com/problems/time-based-key-value-store/](https://leetcode-cn.com/problems/time-based-key-value-store/)
- éš¾åº¦ï¼šğŸŸ¡
- æ ‡ç­¾ï¼š[å“ˆå¸Œè¡¨](/pages/dee52c/)ã€[äºŒåˆ†æŸ¥æ‰¾](/pages/34f617/)

## è§£é¢˜æ€è·¯
### æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨ + äºŒåˆ†æŸ¥æ‰¾
é¦–å…ˆä½¿ç”¨`key`å€¼æ¥è¿›è¡ŒæŸ¥æ‰¾å…ƒç´ ï¼Œç›´æ¥è€ƒè™‘ä½¿ç”¨mapæ˜ å°„ã€‚ç”±äºæ¯ä¸ª`key`å€¼å¯¹åº”å¤šä¸ªå€¼ï¼Œä¸”æ¯ä¸ªå€¼ä»…ç”±`<value,timestamp>`ä¸¤ä¸ªæ•°æ®é¡¹æ„æˆï¼Œå› æ­¤è®¾è®¡å­˜å‚¨ç»“æ„ä¸º`unordered_map<string, vector<pair<string, int>>>`ã€‚å…¶ä¸­ï¼Œé¢˜ç›®æ˜ç¡®æŒ‡å‡º`timestamp`çš„æ’å…¥æ˜¯ä¸¥æ ¼é€’å¢çš„ï¼Œè¦æˆ‘ä»¬æŸ¥æ‰¾å‡ºä¸è¶…è¿‡`target_timestamp`çš„æœ€å¤§`timestamp`æ‰€å¯¹åº”çš„`value`å€¼ï¼Œå³ä¸ºåœ¨æœ‰åºåˆ—è¡¨ä¸­æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„æœ€å¤§å€¼é—®é¢˜ï¼Œå¯å‚è€ƒ[ã€ä¾‹ã€‘å¯»æ‰¾å°äºç›®æ ‡å€¼çš„æœ€å¤§å€¼ä½ç½®](/pages/34f617/#ã€ä¾‹ã€‘å¯»æ‰¾å°äºç›®æ ‡å€¼çš„æœ€å¤§å€¼ä½ç½®)è¿›è¡Œæ”¹å†™ã€‚

ä»£ç å®ç°ï¼š

<code-group>
<code-block title="C++" active>
```cpp
class TimeMap {
public:
    /** Initialize your data structure here. */
    unordered_map<string, vector<pair<string, int>>> map;
    TimeMap() {

    }

    void set(string key, string value, int timestamp) {
        map[key].push_back(pair<string, int>(value, timestamp));
    }

    string get(string key, int timestamp) {
        if(map.find(key) == map.end()) return "";
        vector<pair<string, int>>& pairs = map[key];  // ä½¿ç”¨&é¿å…åå¤æ„å»ºæ•°ç»„
        int left = -1, right = pairs.size() - 1;
        while(left < right) {
            int mid = left + (right - left + 1) / 2;
            if(pairs[mid].second <= timestamp) {
                left = mid;
            } else {
                right = mid - 1;
            }
        }
        return left >= 0 ? pairs[left].first : "";
    }
};
```
</code-block>
</code-group>